<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Auto Google Drive Gallery</title>

<!-- Lightbox2 for next/prev/zoom -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.5/css/lightbox.min.css">

<style>
  :root { --bg:#0b0b0b; --fg:#eee; --accent:#8b5cf6; }
  * { box-sizing:border-box }
  body { margin:0; background:var(--bg); color:var(--fg); font-family:system-ui, Arial, sans-serif; }
  header, footer { max-width:1200px; margin:0 auto; padding:16px; }
  h1 { margin:0; font-size:1.25rem; color:var(--accent); }
  .grid {
    max-width:1200px; margin:0 auto; padding:12px 16px 40px;
    display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  }
  .tile { display:block; border-radius:12px; overflow:hidden; border:1px solid #222; transition:transform .15s; }
  .tile:hover { transform: translateY(-2px); }
  .tile img { width:100%; height:220px; object-fit:cover; display:block; background:#1a1a1a; }
  .empty, .error { max-width:1200px; margin:24px auto; padding:12px 16px; opacity:.9; }
  .empty { color:#bbb; }
  .error { color:#ffb4b4; }
</style>
</head>
<body>
<header>
  <h1>üêæ Auto Google Drive Gallery</h1>
  <div class="empty" id="status">Loading photos‚Ä¶</div>
</header>

<main id="gallery" class="grid"></main>

<footer>Powered by paw prints & love üíú</footer>

<!-- Lightbox2 JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.5/js/lightbox.min.js"></script>

<script>
/* JSONP callback ‚Äî Apps Script must return: initGallery([{id:"...", name:"..."}]) */
function initGallery(items){
  const wrap = document.getElementById('gallery');
  const status = document.getElementById('status');

  if (!Array.isArray(items) || items.length === 0){
    status.textContent = "No images found. Add photos to the Drive folder (and make them viewable to anyone with the link).";
    return;
  }
  status.remove();

  items.forEach(p => {
    // full image (lightbox) + fast thumbnail (grid)
    const full  = `https://drive.google.com/uc?export=view&id=${p.id}`;
    const thumb = `https://drive.google.com/thumbnail?id=${p.id}&sz=w800`; // use w600 for lighter pages

    const a = document.createElement('a');
    a.className = 'tile';
    a.href = full;
    a.setAttribute('data-lightbox', 'purple');
    a.setAttribute('data-title', (p.name || '').replace(/\.[^.]+$/,''));

    const img = document.createElement('img');
    img.src = thumb;
    img.alt = p.name || 'Photo';
    img.loading = 'lazy';

    a.appendChild(img);
    wrap.appendChild(a);
  });

  lightbox.option({ wrapAround:true, fadeDuration:120, imageFadeDuration:120, resizeDuration:120, positionFromTop:40 });
}

/* Fallback if JSONP never arrives (wrong URL or permissions) */
setTimeout(() => {
  const wrap = document.getElementById('gallery');
  if (wrap.childElementCount === 0) {
    const status = document.getElementById('status');
    status.className = 'error';
    status.innerHTML = "Couldn‚Äôt load images. Check that:<br>‚Ä¢ You used the correct Apps Script Web App URL (ending in <code>/exec</code>) with <code>?callback=initGallery</code>.<br>‚Ä¢ Web App access is set to <b>Anyone</b>.<br>‚Ä¢ The Drive folder and files are <b>Anyone with the link ‚Äì Viewer</b>.";
  }
}, 6000);
</script>

<!-- ‚¨áÔ∏è Replace with your Apps Script Web App URL -->
<script src="https://script.google.com/macros/s/AKfycbzMiFMfZKJ7WG03EtFbea0F6c7K0VL3tn9k0Ez7MdB3zZPb0b2ivDjx4A6MxQaWx953ZQ/exec?callback=initGallery"></script> 
</body>
</html>

